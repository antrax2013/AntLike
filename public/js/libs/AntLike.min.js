/*! AntLike button V1.0 Copyright (c) 2014 AntProduction http://antproduction.free.fr/AntLike */
(function(e){e.fn.AntLike=function(t){var n=function(e,t,n){if(t.userLike){t.userLike=false;t.nbLikes--}else{t.userLike=true;t.nbLikes++}if(typeof n=="function")n(e,t)};var r={HtmlContent:'<img class="iconAntLike" data-like="" /><span class="AntLikeValue">0</span>',like:{image:"../public/images/antLike/{0}/like.png",alt:"Like",title:"Like",like:true},unlike:{image:"../public/images/antLike/{0}/unlike.png",alt:"Unlike",title:"Unlike",like:false},nbLikes:0,events:{onClick:{url:null,async:true,action:function(t,r,i,s,o){if(String.IsNullOrWhiteSpace(i)){n(t,r,s)}else{n(t,r,null);e.ajax({cache:false,type:"POST",async:o,dataType:"json",contentType:"application/json; charset=utf-8",url:i,data:JSON.stringify({data:r}),success:function(e){if(!String.IsNullOrWhiteSpace(e)){if(!String.IsNullOrWhiteSpace(e.d)){e=e.d}s(t,e)}}})}}},onLoad:{enabled:false,url:null,action:function(t,n,r,i){e.ajax({cache:false,type:"POST",async:true,dataType:"json",contentType:"application/json; charset=utf-8",url:r,data:"{'data':"+n+"}",success:function(e){if(!String.IsNullOrWhiteSpace(e)){if(!String.IsNullOrWhiteSpace(e.d)){e=e.d}i(t,e)}}})}}},readOnly:"false",state:null,style:"basic",userLike:false};var i=e.extend(true,r,t);if(typeof String.IsNullOrWhiteSpace==="undefined"){throw"$.fn.AntLike - Error: String.js not loaded."}i.like.image=String.format(i.like.image,i.style);i.unlike.image=String.format(i.unlike.image,i.style);return this.each(function(){function s(e,t){u(e,t);if(i.readOnly.toString().toLowerCase()=="false"){o(e)}else{e.css("cursor","auto")}e.removeClass("hidden");return this}function o(e){e.unbind("click").bind("click",function(){if(typeof i.events.onClick.action=="function"){i.events.onClick.action(e,{userLike:i.userLike,nbLikes:i.nbLikes},i.events.onClick.url,u,i.events.onClick.async)}});e.unbind("hover").hover(function(){a(e,i.state.like?i.unlike:i.like)},function(){a(e,i.state)})}function u(t,n){i.nbLikes=n.nbLikes;i.userLike=n.userLike.toString().toLowerCase()=="true"||n.userLike.toString()=="1";i.state=i.userLike?i.like:i.unlike;a(t,i.state);e("span.AntLikeValue",t).text(n.nbLikes)}function a(t,n){e("img.iconAntLike",t).attr("src",String.format(n.image,i.style));t.attr("alt",n.alt).attr("title",n.title);if(i.style!="basic")t.addClass(i.style);if(n.like)t.removeClass("unlike");else t.addClass("unlike")}var t=e(this);t.addClass("hidden").html(i.HtmlContent).addClass("blocAntLike unlike hidden");if(i.events.onLoad.enabled==true&&i.readOnly!=false){if(typeof i.events.onLoad.action=="function"){i.events.onLoad.action(t,{userLike:i.userLike,nbLikes:i.nbLikes},i.events.onLoad.url,s)}}else{var n=false;try{n=i.userLike==true}catch(r){}s(t,{userLike:n,nbLikes:i.nbLikes})}t.on("AntLike.update",function(t,n){u(e(this),n)})})}})(jQuery)